# üìç –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Geo Locator

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Yandex Maps API** - –ø–æ–∏—Å–∫ –º–µ—Å—Ç, –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–∞–Ω–æ—Ä–∞–º—ã
2. **2GIS API** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö –∏ –æ–±—ä–µ–∫—Ç–∞—Ö  
3. **Sentinel Hub** - —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ —Å–Ω–∏–º–∫–∏ –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å –≥–µ–æ—Ç–µ–≥–∞–º–∏
5. **EXIF –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
6. **–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend UI   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Geo API        ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Geo Aggregator ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                        ‚îÇ
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ                                ‚îÇ                                ‚îÇ
                       ‚ñº                                ‚ñº                                ‚ñº
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ  Yandex Maps    ‚îÇ              ‚îÇ     2GIS API    ‚îÇ              ‚îÇ  Sentinel Hub   ‚îÇ
            ‚îÇ    Service      ‚îÇ              ‚îÇ    Service      ‚îÇ              ‚îÇ    Service      ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ                                ‚îÇ                                ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                        ‚îÇ
                                                        ‚ñº
                                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                              ‚îÇ  Image Database ‚îÇ
                                              ‚îÇ    Service      ‚îÇ
                                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                        ‚îÇ
                                                        ‚ñº
                                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                              ‚îÇ   PostgreSQL    ‚îÇ
                                              ‚îÇ   Database      ‚îÇ
                                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏:

#### `POST /api/geo/locate`
–ì–ª–∞–≤–Ω—ã–π endpoint –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `image` (file) - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- `location_hint` (string, optional) - –ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏
- `description` (string, optional) - –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "final_location": {
    "coordinates": {"latitude": 55.7558, "longitude": 37.6176},
    "source": "exif_gps",
    "confidence": 0.95
  },
  "confidence_score": 0.95,
  "sources_used": ["exif_gps", "image_match"],
  "recommendations": ["–í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è"]
}
```

#### `GET /api/geo/search/places`
–ü–æ–∏—Å–∫ –º–µ—Å—Ç —á–µ—Ä–µ–∑ Yandex Maps –∏ 2GIS.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `q` (string) - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- `lat`, `lon` (float, optional) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞ –ø–æ–∏—Å–∫–∞
- `radius` (int, optional) - —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ –≤ –º–µ—Ç—Ä–∞—Ö
- `source` (string, optional) - –∏—Å—Ç–æ—á–Ω–∏–∫: 'yandex', 'dgis', 'all'

#### `GET /api/geo/geocode`
–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `address` (string) - –∞–¥—Ä–µ—Å –¥–ª—è –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- `source` (string, optional) - 'yandex' –∏–ª–∏ 'dgis'

#### `GET /api/geo/reverse-geocode`
–û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∞–¥—Ä–µ—Å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `lat`, `lon` (float) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- `source` (string, optional) - 'yandex' –∏–ª–∏ 'dgis'

#### `GET /api/geo/images/search`
–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `q` (string, optional) - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- `lat`, `lon` (float, optional) - –ø–æ–∏—Å–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- `radius` (int, optional) - —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞
- `has_gps` (bool, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–ª–∏—á–∏—é GPS
- `city` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É

#### `GET /api/geo/nearby`
–ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –º–µ—Å—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `lat`, `lon` (float) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞
- `category` (string, optional) - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –º–µ—Å—Ç
- `radius` (int, optional) - —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π

–í —Ñ–∞–π–ª–µ `.env` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å:

```bash
# Yandex Maps API
YANDEX_API_KEY=

# 2GIS API  
DGIS_API_KEY=

# Sentinel Hub
SENTINEL_INSTANCE_ID=your_sentinel_instance_id
SENTINEL_CLIENT_ID=your_client_id
SENTINEL_CLIENT_SECRET=your_client_secret

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=postgres
POSTGRES_PASSWORD=
POSTGRES_DB=geo_locator
POSTGRES_HOST=localhost
```

## üìä –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ EXIF GPS (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 1.0)
- –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### 2. –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 0.9)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ü–æ–∏—Å–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –≤ —Ä–∞–¥–∏—É—Å–µ 1–∫–º
- –£—á–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞ (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è)

### 3. –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–º–∏ —Å–Ω–∏–º–∫–∞–º–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 0.8)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ CV –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è

### 4. –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ API (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 0.7)
- Yandex Maps: –ø–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –º–µ—Å—Ç–∞
- 2GIS: –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±—ä–µ–∫—Ç–∞—Ö
- –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 5. –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ú–æ–¥–µ–ª—å GeoImage

```sql
CREATE TABLE geo_images (
    id UUID PRIMARY KEY,
    filename VARCHAR(255) NOT NULL,
    file_path VARCHAR(500) NOT NULL,
    file_hash VARCHAR(64) UNIQUE NOT NULL,
    
    -- –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
    latitude FLOAT,
    longitude FLOAT,
    altitude FLOAT,
    
    -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    width INTEGER,
    height INTEGER,
    camera_make VARCHAR(100),
    camera_model VARCHAR(100),
    
    -- –ê–¥—Ä–µ—Å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  
    address TEXT,
    city VARCHAR(100),
    region VARCHAR(100),
    country VARCHAR(100),
    
    -- –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
    processed BOOLEAN DEFAULT FALSE,
    has_gps BOOLEAN DEFAULT FALSE,
    geo_source VARCHAR(50), -- 'exif', 'manual', 'api_match'
    
    -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
    date_taken TIMESTAMP,
    date_uploaded TIMESTAMP DEFAULT NOW(),
    date_modified TIMESTAMP DEFAULT NOW()
);
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
2. **–ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö** - –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É  
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏** - —Ä—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
4. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä** - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### Yandex Maps API

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã —Å –º–µ—Ç–∫–∞–º–∏
- –ü–∞–Ω–æ—Ä–∞–º—ã —É–ª–∏—Ü (Street View)

**–õ–∏–º–∏—Ç—ã:** 
- 25,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
- 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É

### 2GIS API

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö
- –†–µ–π—Ç–∏–Ω–≥–∏, –æ—Ç–∑—ã–≤—ã, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- –†–∞–±–æ—á–∏–µ —á–∞—Å—ã, –∫–æ–Ω—Ç–∞–∫—Ç—ã
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ä—É–±—Ä–∏–∫–∏

**–õ–∏–º–∏—Ç—ã:**
- 10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
- 10 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É

### Sentinel Hub

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –°–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ —Å–Ω–∏–º–∫–∏ Sentinel-2
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
- –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏
- –í—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (10-60–º/–ø–∏–∫—Å–µ–ª—å)

**–õ–∏–º–∏—Ç—ã:**
- 1,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
- –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ 2500x2500 –ø–∏–∫—Å–µ–ª–µ–π

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏:

1. **GPS Accuracy** - —Ç–æ—á–Ω–æ—Å—Ç—å GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ EXIF
2. **Match Confidence** - —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏
3. **Source Reliability** - –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
4. **Aggregation Score** - –∏—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
GET /api/geo/statistics

{
  "total_images": 1250,
  "images_with_gps": 890,
  "gps_coverage": 71.2,
  "available_services": {
    "yandex_maps": true,
    "dgis": true,
    "sentinel_hub": true,
    "image_database": true
  }
}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt-get install postgresql postgis gdal-bin

# Python –ø–∞–∫–µ—Ç—ã
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
createdb geo_locator

# –í–∫–ª—é—á–µ–Ω–∏–µ PostGIS —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
psql geo_locator -c "CREATE EXTENSION postgis;"
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü

```python
from services.image_database_service import ImageDatabaseService
service = ImageDatabaseService()
# –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

```bash
# –ó–∞–ø—É—Å–∫ backend
python app.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:5000/api/geo/health
```

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python –∫–ª–∏–µ–Ω—Ç:

```python
import requests

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
with open('photo.jpg', 'rb') as f:
    response = requests.post(
        'http://localhost:5000/api/geo/locate',
        files={'image': f},
        data={
            'location_hint': '–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å',
            'description': '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ö—Ä–µ–º–ª—è'
        },
        headers={'Authorization': 'Bearer <token>'}
    )

result = response.json()
print(f"Coordinates: {result['final_location']['coordinates']}")
print(f"Confidence: {result['confidence_score']}")
```

### JavaScript –∫–ª–∏–µ–Ω—Ç:

```javascript
const formData = new FormData();
formData.append('image', fileInput.files[0]);
formData.append('location_hint', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥');

fetch('/api/geo/locate', {
    method: 'POST',
    body: formData,
    headers: {
        'Authorization': `Bearer ${token}`
    }
})
.then(response => response.json())
.then(data => {
    console.log('Location:', data.final_location.coordinates);
    console.log('Sources used:', data.sources_used);
});
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ Python –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```python
import logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è:

- `GPS coordinates found in EXIF data` - –Ω–∞–π–¥–µ–Ω—ã GPS –≤ EXIF
- `Found N similar images in database` - –Ω–∞–π–¥–µ–Ω—ã –ø–æ—Ö–æ–∂–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `Satellite match score: X` - –æ—Ü–µ–Ω–∫–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ —Å–ø—É—Ç–Ω–∏–∫–æ–º
- `Geolocation completed. Success: X, Confidence: Y` - –∏—Ç–æ–≥ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:5000/api/geo/health

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
curl http://localhost:5000/api/geo/statistics
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å GPS** - –≤–∫–ª—é—á–∏—Ç–µ –≥–µ–æ—Ç–µ–≥–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–º–µ—Ä—ã
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏—è** - —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
3. **–ü–æ–ø–æ–ª–Ω—è–π—Ç–µ –±–∞–∑—É** - –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –±–æ–ª—å—à–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–µ—Ç–æ—á–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:

1. **–ö–∞—á–µ—Å—Ç–≤–æ EXIF** - –Ω–µ –≤—Å–µ –∫–∞–º–µ—Ä—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç —Ç–æ—á–Ω—ã–µ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
2. **API –ª–∏–º–∏—Ç—ã** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–ü–æ–∫—Ä—ã—Ç–∏–µ —Å–ø—É—Ç–Ω–∏–∫–æ–≤** - –Ω–µ –≤—Å–µ —Ä–µ–≥–∏–æ–Ω—ã –∏–º–µ—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–Ω–∏–º–∫–∏
4. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ** - –∞–ª–≥–æ—Ä–∏—Ç–º—ã CV —Ç—Ä–µ–±—É—é—Ç –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Yandex Maps API Documentation](https://yandex.ru/dev/maps/)
- [2GIS API Documentation](https://docs.2gis.com/)
- [Sentinel Hub Documentation](https://docs.sentinel-hub.com/)
- [PostGIS Documentation](https://postgis.net/documentation/)
- [OpenCV Python Documentation](https://docs.opencv.org/)
