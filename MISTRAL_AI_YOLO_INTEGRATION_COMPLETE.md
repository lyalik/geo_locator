# MISTRAL AI + YOLO –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞:** 01.09.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### –î–≤–æ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π:
- ü§ñ **Mistral AI** - –∞–Ω–∞–ª–∏–∑ —Å –ø–æ–º–æ—â—å—é –ò–ò
- üéØ **YOLO** - –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
```
Screenshot from 2025-09-01 16-11-59.png
üìä –ò–¢–û–ì–û: 7 –Ω–∞—Ä—É—à–µ–Ω–∏–π
ü§ñ Mistral: 2 –Ω–∞—Ä—É—à–µ–Ω–∏—è
üéØ YOLO: 5 –Ω–∞—Ä—É—à–µ–Ω–∏–π
```

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** Mistral AI –Ω–µ –ø–æ–ª—É—á–∞–ª API –∫–ª—é—á
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω `load_dotenv('.env')` –≤ `run_local.py`
```python
from dotenv import load_dotenv
load_dotenv('.env')
```

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª–µ–º `source`
**–ü—Ä–æ–±–ª–µ–º–∞:** YOLO –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ —Å `source: undefined`
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `'source': 'yolo'` –≤ `yolo_violation_detector.py`
```python
violation = {
    # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è ...
    'source': 'yolo'  # –î–û–ë–ê–í–õ–ï–ù–û
}
```

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** `cannot write mode RGBA as JPEG`
**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è RGBA ‚Üí RGB –≤ `mistral_ai_service.py`
```python
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º RGBA –≤ RGB –¥–ª—è JPEG
if img.mode in ('RGBA', 'LA', 'P'):
    background = Image.new('RGB', img.size, (255, 255, 255))
    if img.mode == 'P':
        img = img.convert('RGBA')
    background.paste(img, mask=img.split()[-1] if img.mode in ('RGBA', 'LA') else None)
    img = background
```

## üöÄ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### Mistral AI –¥–µ—Ç–µ–∫—Ü–∏—è:
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π
- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã—Ö –≤—ã–≤–µ—Å–æ–∫
- ‚úÖ –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π –ø–∞—Ä–∫–æ–≤–∫–∏
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å

### YOLO –¥–µ—Ç–µ–∫—Ü–∏—è:
- ‚úÖ –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
- ‚úÖ Bounding box –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ (ü§ñ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, üéØ —Å–∏–Ω–∏–π)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
- ‚úÖ PNG (—Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –∏ –±–µ–∑)
- ‚úÖ JPEG
- ‚úÖ –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### API —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```json
{
  "success": true,
  "data": {
    "violations": [
      {
        "category": "parking_violation",
        "confidence": 0.91,
        "description": "–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø–∞—Ä–∫–æ–≤–∫–∏",
        "source": "yolo",
        "bbox": {...}
      },
      {
        "category": "facade_violation", 
        "confidence": 0.85,
        "description": "Mistral AI: –ù–µ–∑–∞–∫–æ–Ω–Ω—ã–µ –≤—ã–≤–µ—Å–∫–∏",
        "source": "mistral_ai",
        "bbox": {...}
      }
    ]
  }
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```
ü§ñ Mistral AI - Starting enhanced violation analysis
ü§ñ Mistral AI - Service available: True
ü§ñ Mistral AI - Final violations: [...]
üîç Combined Detection - Total violations: 7
```

## üéâ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£

### –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞:
- ‚úÖ Backend API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –î–≤–æ–π–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **Mistral AI:** ~2-5 —Å–µ–∫—É–Ω–¥ –∞–Ω–∞–ª–∏–∑–∞
- **YOLO:** ~100-200ms –¥–µ—Ç–µ–∫—Ü–∏–∏
- **–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~3-6 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –¢–æ—á–Ω–æ—Å—Ç—å:
- **Mistral AI:** 70-85% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- **YOLO:** 50-95% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è:** –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –¥–≤—É—Ö –º–µ—Ç–æ–¥–æ–≤

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å PNG —Ñ–∞–π–ª–∞–º–∏
3. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ frontend/backend
4. üîÑ –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã

---

**–ê–≤—Ç–æ—Ä:** Cascade AI Assistant  
**–ü—Ä–æ–µ–∫—Ç:** Geo Locator - –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Mistral AI, YOLOv8, React, Flask, PostgreSQL
