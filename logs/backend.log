INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
WARNING:services.mistral_ai_service:MISTRAL_API_KEY not found in environment variables
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
 * Serving Flask app 'app'
 * Debug mode: on
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.85.1:5001
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
WARNING:services.mistral_ai_service:MISTRAL_API_KEY not found in environment variables
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:16:46] "OPTIONS /api/violations/list HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:16:46] "OPTIONS /api/violations/list HTTP/1.1" 200 -
INFO:app:📊 Database - Retrieved 86 violations from database
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:16:46] "GET /api/violations/list HTTP/1.1" 200 -
INFO:app:📊 Database - Retrieved 86 violations from database
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:16:46] "GET /api/violations/list HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:16:50] "[33mGET /logo192.png HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:20:26] "OPTIONS /api/object-groups/analyze HTTP/1.1" 200 -
INFO:routes.object_group_api:📥 Object group analysis request - files: 5, form: ['objects', 'location_hint']
INFO:routes.object_group_api:🔍 Processing object: Тополиная with 5 files
INFO:routes.object_group_api:🎯 Analyzing object group: Тополиная (5 files)
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-09_14-18-53.jpg
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Топлоная
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Топлоная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Топлоная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-09_14-18-53.jpg
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e33cf140>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-12_16-17-20.jpg
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Топлоная
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Топлоная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Топлоная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-12_16-17-20.jpg
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Request error for OSM API https://overpass.kumi.systems/api/interpreter: HTTPSConnectionPool(host='overpass.kumi.systems', port=443): Max retries exceeded with url: /api/interpreter (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e33cf470>: Failed to resolve 'overpass.kumi.systems' ([Errno -2] Name or service not known)"))
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e1a6cd10>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Топлоная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default

0: 480x640 6 cars, 77.0ms
Speed: 2.4ms preprocess, 77.0ms inference, 0.9ms postprocess per image at shape (1, 3, 480, 640)
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Топлоная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Топлоная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Request error for OSM API https://overpass.kumi.systems/api/interpreter: HTTPSConnectionPool(host='overpass.kumi.systems', port=443): Max retries exceeded with url: /api/interpreter (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a92fe9f0>: Failed to resolve 'overpass.kumi.systems' ([Errno -2] Name or service not known)"))
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e35a1b20>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_1.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Топлоная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default

0: 640x480 2 cars, 77.3ms
Speed: 2.5ms preprocess, 77.3ms inference, 0.7ms postprocess per image at shape (1, 3, 640, 480)
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Топлоная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Топлоная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_1.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a92ff3e0>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_2.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Топлоная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default

0: 448x640 6 cars, 85.4ms
Speed: 3.4ms preprocess, 85.4ms inference, 1.1ms postprocess per image at shape (1, 3, 448, 640)
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Топлоная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Топлоная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_2.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Request error for OSM API https://overpass.kumi.systems/api/interpreter: HTTPSConnectionPool(host='overpass.kumi.systems', port=443): Max retries exceeded with url: /api/interpreter (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e1a6d190>: Failed to resolve 'overpass.kumi.systems' ([Errno -2] Name or service not known)"))
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Топлоная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e5fd5700>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:27:38] "POST /api/object-groups/analyze HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:30:29] "OPTIONS /api/object-groups/analyze HTTP/1.1" 200 -
INFO:routes.object_group_api:📥 Object group analysis request - files: 5, form: ['objects', 'location_hint']
INFO:routes.object_group_api:🔍 Processing object: Тополиная with 5 files
INFO:routes.object_group_api:🎯 Analyzing object group: Тополиная (5 files)
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-09_14-18-53.jpg
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default

0: 288x640 3 cars, 1 truck, 80.9ms
Speed: 1.6ms preprocess, 80.9ms inference, 1.1ms postprocess per image at shape (1, 3, 288, 640)
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-09_14-18-53.jpg
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e33ceea0>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-12_16-17-20.jpg
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default

0: 288x640 1 airplane, 1 stop sign, 46.6ms
Speed: 1.4ms preprocess, 46.6ms inference, 0.6ms postprocess per image at shape (1, 3, 288, 640)
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-12_16-17-20.jpg
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a92ff1d0>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e35a34d0>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_1.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_1.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a92fee40>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_2.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_2.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a92fc140>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:39:16] "POST /api/object-groups/analyze HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:41:46] "OPTIONS /api/object-groups/analyze HTTP/1.1" 200 -
INFO:routes.object_group_api:📥 Object group analysis request - files: 5, form: ['objects', 'location_hint']
INFO:routes.object_group_api:🔍 Processing object: Тополиная with 5 files
INFO:routes.object_group_api:🎯 Analyzing object group: Тополиная (5 files)
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-09_14-18-53.jpg
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-09_14-18-53.jpg
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a935ddc0>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-12_16-17-20.jpg
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_photo_2025-09-12_16-17-20.jpg
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a935e930>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:OSM API returned status 504: <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" lang="en"/>
  <title>OSM3S Response</title>
</head>
<body>

<p>The data included in this document is from www.openstreetmap.org. The data is made available under ODbL.</p>
<p><strong style="color:#FF0000">Error</strong>: runtime error: open64: 0 Success /osm3s_osm_base Dispatcher_Client::request_read_and_idx::timeout. The server is probably too busy to handle your request. </p>

</body>
</html>

INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.openstreetmap.ru/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass.openstreetmap.ru/api/interpreter
ERROR:services.osm_overpass_service:All OSM Overpass APIs failed
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a935d7f0>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_1.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_1.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass-api.de/api/interpreter
WARNING:services.osm_overpass_service:Timeout for OSM API: https://overpass-api.de/api/interpreter
INFO:services.osm_overpass_service:Executing OSM Overpass query to https://overpass.kumi.systems/api/interpreter
INFO:services.osm_overpass_service:OSM query successful, found 0 elements
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018a935df40>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:services.enhanced_coordinate_detector:🔍 Enhanced coordinate detection for: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_2.webp
INFO:services.enhanced_coordinate_detector:📍 Location hint: Краснодар улица Тополиная
WARNING:exifread:Webp file does not have exif data.
INFO:services.enhanced_coordinate_detector:🚫 Skipping default city coordinates - need real image analysis
WARNING:services.enhanced_coordinate_detector:⚠️ No valid coordinates found - returning None instead of default
INFO:services.coordinate_detector:Detected and cached 5 objects
ERROR:services.google_vision_service:Gemini API error: 400 User location is not supported for the API use.
WARNING:services.google_vision_service:🌍 Gemini API blocked due to location restrictions. Try VPN to US/UK/Canada
INFO:services.coordinate_detector:🗺️ Location hint received: 'Краснодар улица Тополиная' (type: <class 'str'>, bool: True)
INFO:services.coordinate_detector:🗺️ Processing location hint: 'Краснодар улица Тополиная'
INFO:services.geo_aggregator_service:Starting geolocation for image: /home/denis/Documents/Hackathon_2025/geo_locator/backend/uploads/object_groups/1757686811999_XXXL_2.webp
WARNING:exifread:Webp file does not have exif data.
INFO:services.geo_aggregator_service:Yandex found 3 places
INFO:services.osm_overpass_service:Using cached OSM data
INFO:services.geo_aggregator_service:API results: {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}
INFO:services.geo_aggregator_service:Yandex places found: 3
INFO:services.geo_aggregator_service:All results before aggregation: {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}
INFO:services.geo_aggregator_service:External APIs details:
INFO:services.geo_aggregator_service:  yandex: success=True, places_count=3
INFO:services.geo_aggregator_service:    First place coordinates: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:  dgis: success=False, places_count=0
INFO:services.geo_aggregator_service:  osm: success=False, places_count=0
INFO:services.geo_aggregator_service:Added candidate from yandex: {'latitude': 45.08599, 'longitude': 38.996675}
INFO:services.geo_aggregator_service:Final location after aggregation: {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}
WARNING:exifread:Webp file does not have exif data.
ERROR:services.image_database_service:Error adding image: 'width' is an invalid keyword argument for GeoImage
INFO:services.geo_aggregator_service:Geolocation completed. Success: True, Confidence: 0.70
INFO:services.coordinate_detector:🗺️ Geo result with hint: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:🗺️ Location hint processing successful
INFO:services.coordinate_detector:🏛️ Archive search - Service available: True
INFO:services.coordinate_detector:🏛️ Archive search - Searching for similar buildings in archive...
INFO:services.archive_photo_service:🔍 Found 0 similar buildings (threshold: 0.75)
INFO:services.coordinate_detector:🏛️ Archive search - Result: None
INFO:services.coordinate_detector:🏛️ Archive search - No matches found
INFO:services.coordinate_detector:📍 Coordinate sources: GPS=False, Geo=True, Archive=False
INFO:services.coordinate_detector:🔍 Combining coordinate sources:
INFO:services.coordinate_detector:  GPS: None
INFO:services.coordinate_detector:  Geo: {'success': True, 'final_location': {'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'source': 'yandex_search', 'weight': 0.7, 'confidence': 0.7, 'place_info': {'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}}, 'confidence_score': 0.7, 'sources_used': ['yandex_search'], 'all_results': {'external_apis': {'yandex': {'success': True, 'source': 'yandex_maps', 'query': 'Краснодар улица Тополиная', 'total_found': 3, 'places': [{'name': 'Тополиная улица', 'description': 'микрорайон имени Петра Метальникова, Краснодар, Россия', 'coordinates': {'latitude': 45.08599, 'longitude': 38.996675}, 'address': 'Россия, Краснодар, микрорайон имени Петра Метальникова, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'улица Тополиная Аллея', 'description': 'микрорайон Завод Измерительных Приборов, Краснодар, Россия', 'coordinates': {'latitude': 45.068996, 'longitude': 38.995435}, 'address': 'Россия, Краснодар, микрорайон Завод Измерительных Приборов, улица Тополиная Аллея', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}, {'name': 'Тополиная улица', 'description': 'СТ Прибрежный-3, Сургут, Ханты-Мансийский автономный округ — Югра, Россия', 'coordinates': {'latitude': 61.317106, 'longitude': 73.455852}, 'address': 'Россия, Ханты-Мансийский автономный округ — Югра, Сургут, СТ Прибрежный-3, Тополиная улица', 'category': ['street'], 'phone': [], 'url': '', 'hours': {}, 'precision': 'street', 'type': 'street'}]}, 'dgis': {'success': False}, 'osm': {'success': False}}}, 'recommendations': ['Средняя уверенность в результате', 'Для повышения точности добавьте описание места']}
INFO:services.coordinate_detector:  Archive: None
INFO:services.coordinate_detector:  Google OCR: None
INFO:services.coordinate_detector:  Google Geo: None
INFO:services.coordinate_detector:  Similarity: None
INFO:services.coordinate_detector:📍 Final coordinates: {'latitude': 45.08599, 'longitude': 38.996675, 'confidence': 0.7, 'source': 'geolocation_service', 'all_sources': [{'latitude': 45.08599, 'longitude': 38.996675, 'source': 'geolocation_service', 'confidence': 0.7, 'priority': 2}]}
INFO:services.coordinate_detector:🛰️ Getting satellite imagery for coordinates: 45.08599, 38.996675
ERROR:services.roscosmos_satellite_service:Geoportal error: HTTPSConnectionPool(host='catalog.gptl.ru', port=443): Max retries exceeded with url: /api/search?bbox=38.986675000000005%2C45.075990000000004%2C39.006675%2C45.09599&limit=10&cloud_cover=30&api_key=MjYxMTk0MjI3.MjYxMTk0MjQ1.a3d78e3e72-88656c-8eb246 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x7018e35a2630>: Failed to resolve 'catalog.gptl.ru' ([Errno -2] Name or service not known)"))
WARNING:services.roscosmos_satellite_service:ScanEx returned non-image content: b'\xef\xbb\xbf<?xml version="1.0" encoding="utf-8"?>\r\n<Exception>\r\n  <Message>Internal error: APIkey not found<'
INFO:services.coordinate_detector:✅ Roscosmos satellite image obtained
ERROR:services.yandex_satellite_service:Yandex satellite image error: 403 Client Error: Forbidden for url: https://static-maps.yandex.ru/1.x/?ll=38.996675%2C45.08599&z=16&size=512%2C512&l=sat&apikey=6f97dac1-f67f-4e10-89b8-c43c4dc930f7
INFO:services.coordinate_detector:🗺️ Getting enhanced location info for: 45.08599, 38.996675
INFO:services.coordinate_detector:✅ Yandex reverse geocoding successful
INFO:services.coordinate_detector:✅ 2GIS found 0 nearby places
INFO:services.coordinate_detector:✅ Yandex location search successful
INFO:services.coordinate_detector:Cached coordinate analysis results
INFO:werkzeug:127.0.0.1 - - [12/Sep/2025 17:47:16] "POST /api/object-groups/analyze HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/mistral_ocr_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/panorama_analyzer_service.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/enhanced_coordinate_detector.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/enhanced_coordinate_detector.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/enhanced_coordinate_detector.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/enhanced_coordinate_detector.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/enhanced_coordinate_detector.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/enhanced_coordinate_detector.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/routes/violation_api.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/routes/violation_api.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/routes/violation_api.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/routes/violation_api.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
INFO:werkzeug: * Detected change in '/home/denis/Documents/Hackathon_2025/geo_locator/backend/routes/violation_api.py', reloading
✅ Maps API registered successfully
Warning: YOLOViolationDetector not available: cannot import name 'YOLOViolationDetector' from 'services.yolo_violation_detector' (/home/denis/Documents/Hackathon_2025/geo_locator/backend/services/yolo_violation_detector.py)
✅ Violation API registered successfully
✅ Geo API registered successfully
✅ Cache API registered successfully
✅ Rosreestr API registered successfully
✅ OpenStreetMap API registered successfully
❌ Sentinel API registration failed: attempted relative import beyond top-level package
✅ Satellite API registered successfully
✅ OCR API registered successfully
✅ Notification API registered successfully
✅ Coordinate API registered successfully
✅ Object Group API registered successfully
🚀 Starting Geo Locator Backend (Local Development)
==================================================
✅ PostgreSQL connection successful
✅ Redis connection successful
✅ Database tables created successfully

🎉 All checks passed! Starting Flask development server...
📍 Backend will be available at: http://localhost:5001
📍 API endpoints at: http://localhost:5001/api/

Press Ctrl+C to stop the server
==================================================
INFO:werkzeug: * Restarting with stat
INFO:services.cache_service:Connected to Redis at redis://localhost:6379/0
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:routes.geo_api:Geo services initialized successfully
/home/denis/Documents/Hackathon_2025/geo_locator/backend/venv/lib/python3.12/site-packages/ultralytics/nn/tasks.py:567: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(file, map_location='cpu'), file  # load
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:✅ YOLO detector initialized
INFO:services.osm_overpass_service:🗺️ OSM Overpass Service initialized
INFO:services.coordinate_detector:✅ API services initialized (Yandex, 2GIS, Roscosmos)
INFO:services.google_vision_service:🤖 Gemini initialized with model: gemini-2.0-flash
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.google_vision_service:🏛️ Archive service integrated into Google Vision
WARNING:services.google_vision_service:Google Cloud Vision credentials not found
INFO:services.coordinate_detector:✅ Google Vision service initialized
INFO:services.archive_photo_service:🏛️ Archive Photo Service initialized with 3 photos
INFO:services.coordinate_detector:🏛️ Archive Photo service initialized
INFO:services.mistral_ai_service:🤖 AI initialized with API key: OE9txswT...
INFO:services.dgis_panorama_service:🗺️ 2GIS Panorama service initialized
INFO:services.yolo_violation_detector:Loaded pretrained YOLOv8n model
INFO:services.yolo_violation_detector:YOLOv8 Object Detector initialized on cpu
INFO:services.coordinate_detector:🎯 Enhanced Coordinate Detector initialized
INFO:services.coordinate_detector:Coordinate Detector initialized
INFO:services.video_coordinate_detector:Video Coordinate Detector initialized
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 111-291-728
